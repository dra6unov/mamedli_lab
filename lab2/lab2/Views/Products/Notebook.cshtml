
@{
    ViewBag.Title = "Ноутбуки";
}

<div class="container body-content">
    <h2>Ноутбуки</h2>
    @if (Model.Count > 0)
    {
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Наименование</th>
                <th scope="col">Производитель</th>
                <th scope="col">Краткое описание</th>
                <th scope="col">Стоимость</th>
            </tr>
        </thead>

        <tbody>

            @foreach (var item in Model)
            {
                <tr>
                    <th scope="row" id="name">@item.PRODUCTNAME</th>
                    <td>@item.MANUFACT</td>
                    <td>@item.DESCR</td>
                    <td id="price">@item.PRICE</td>
                    <td><input type="button" id="addStore" value="Добавить в корзинцу" class="btn btn-danger" /></td>
                    <td><input type="button" id="plus" class="but plus" value="+" /><input type="text" class="count" id="count" value="1"><input type="button" id="minus" class="but minus" value="-" /></td>
                </tr>
            }
        </tbody>
    </table>
    }
    else
    {
        <h3>Еще нет товара в этой категории</h3>
    }
</div>

<script type="text/javascript">
    $(".but").click(function () {
        var $button = $(this);
        var value = $("#count").val();
        var newValue
        if ($button.val() == "+") {
            newValue = parseInt(value) + 1;
        }
        else {
            if (value > 0) {
                newValue = parseInt(value) - 1;
            }
            else {
                newValue = 0;
            }
        }

        $("#count").val(newValue);
    });

    $("#addStore").click(function () {
        $.ajax({
            method: "POST",
            url: "/Store/addToStore",
            data: {
                name: $("#name").text(),
                price: $("#price").text(),
                kol: $("#count").val(),
                mail: document.cookie.replace("mail=", "")
            }
        });
    });
</script>